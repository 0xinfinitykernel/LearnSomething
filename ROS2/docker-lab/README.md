# ğŸ¤– ROS 2 å¤šé¡¹ç›®è‡ªåŠ¨æ„å»ºè¿è¡Œç¯å¢ƒ

æœ¬é¡¹ç›®æä¾›ä¸€å¥—å®Œæ•´çš„ Docker åŒ– ROS 2 æ„å»ºä¸è¿è¡Œæ–¹æ¡ˆï¼Œæ”¯æŒä»å¤šä¸ªç§æœ‰ Git ä»“åº“è‡ªåŠ¨æ‹‰å–ä»£ç ã€å®‰è£…ä¾èµ–ã€æ„å»ºå¹¶è¿è¡Œ ROS 2 èŠ‚ç‚¹ã€‚é€‚ç”¨äºå¼€å‘è°ƒè¯•ã€CI/CD é›†æˆä¸å¯ç§»æ¤éƒ¨ç½²ã€‚

---

## ğŸ“ é¡¹ç›®ç»“æ„è¯´æ˜

| æ–‡ä»¶/ç›®å½•             | è¯´æ˜ |
|----------------------|------|
| `Dockerfile`         | æ„å»º ROS 2 å®¹å™¨é•œåƒï¼Œæ”¯æŒå¤šé¡¹ç›® clone + install + build |
| `projects.txt`       | å¤šé¡¹ç›® Git ä»“åº“åœ°å€åˆ—è¡¨ |
| `build.sh`           | æ„å»ºé•œåƒè„šæœ¬ï¼Œè¯»å– `.env` è‡ªåŠ¨æ³¨å…¥æ„å»ºå‚æ•° |
| `start.sh`           | å¯åŠ¨å®¹å™¨è„šæœ¬ï¼ˆé¦–æ¬¡æ‰§è¡Œå¯ç”Ÿæˆ `.env`ï¼‰ |
| `docker-compose.yml` | å¯åŠ¨å®¹å™¨ã€æŒ‚è½½ç›®å½•ã€ç»‘å®š X11 ç­‰ |
| `.env.template`      | ç¤ºä¾‹é…ç½®æ–‡ä»¶ï¼Œå¤åˆ¶ä¸º `.env` ä½¿ç”¨ |

---

## ğŸš€ ä½¿ç”¨æŒ‡å—

### 1ï¸âƒ£ ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼šç”Ÿæˆ `.env`

é¦–æ¬¡è¿è¡Œè¯·æ‰§è¡Œï¼š

```bash
./start.sh
```

è¯¥è„šæœ¬ä¼šè‡ªåŠ¨ç”Ÿæˆ `.env` æ–‡ä»¶ï¼Œå¹¶å¼•å¯¼ä½ è¾“å…¥ Git ç”¨æˆ·åä¸å¯†ç ï¼ˆç”¨äºå…‹éš†ç§æœ‰ä»“åº“ï¼‰ã€‚

ä¹Ÿå¯æ‰‹åŠ¨å¤åˆ¶ï¼š

```bash
cp .env.template .env
```

---

### 2ï¸âƒ£ ç¼–è¾‘é¡¹ç›®åˆ—è¡¨

å°†ä½ è¦æ„å»ºçš„ Git ä»“åº“åœ°å€å†™å…¥ `projects.txt`ï¼Œä¸€è¡Œä¸€ä¸ªï¼Œä¾‹å¦‚ï¼š

```
http://192.168.0.108/yourteam/lx_camera_ros2.git
http://192.168.0.108/yourteam/another_module.git
```

æ— éœ€åœ¨ URL ä¸­å†™å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä» `.env` æ³¨å…¥ã€‚

---

### 3ï¸âƒ£ æ„å»ºé•œåƒ

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ„å»ºå®Œæ•´ç¯å¢ƒé•œåƒï¼š

```bash
./build.sh
```

æ„å»ºè¿‡ç¨‹å°†æ‰§è¡Œä»¥ä¸‹å†…å®¹ï¼š

- å…‹éš†æ‰€æœ‰ä»“åº“
- è‡ªåŠ¨æ‰§è¡Œæ¯ä¸ªé¡¹ç›®ä¸­çš„ `install.sh`ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
- ä½¿ç”¨ `colcon build` æ„å»ºå…¨éƒ¨ ROS 2 åŒ…
- æœ€ç»ˆç”Ÿæˆé•œåƒ `ros2_multi_project_runtime`

---

### 4ï¸âƒ£ å¯åŠ¨å®¹å™¨è¿è¡Œ ROS ç³»ç»Ÿ

å®¹å™¨æ„å»ºå®Œæˆåï¼Œå¯ç›´æ¥å¯åŠ¨ï¼š

```bash
./start.sh
```

è¯¥å‘½ä»¤å°†åŸºäº `docker-compose.yml` å¯åŠ¨å®¹å™¨ï¼Œå¹¶è¿›å…¥ä½ æŒ‡å®šçš„ ROS å·¥ä½œç›®å½•ï¼ˆå¦‚ `/home/youruser/ws`ï¼‰ï¼Œè‡ªåŠ¨æ‰§è¡Œè®¾å®šçš„å¯åŠ¨æŒ‡ä»¤ã€‚

---

## ğŸ” å®‰å…¨è¯´æ˜

- `.env` åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ Git å¯†ç /Tokenï¼‰ï¼Œ**è¯·å‹¿æäº¤åˆ°ä»“åº“**
- `.env` å·²åœ¨ `.gitignore` ä¸­å¿½ç•¥
- æ¨èåœ¨ä¼ä¸šæˆ– CI/CD åœºæ™¯ä¸­ä½¿ç”¨ Git è®¿é—® Token æ›¿ä»£å¯†ç 

---

## ğŸ§© å¸¸è§é—®é¢˜

### â“ Q: æ¯æ¬¡å¯åŠ¨éƒ½ä¼šé‡æ–°æ„å»ºå—ï¼Ÿ

ä¸ä¼šã€‚åªæœ‰åœ¨ä½ ä¿®æ”¹é¡¹ç›®ä»£ç æˆ– `projects.txt` åï¼Œæ‰‹åŠ¨æ‰§è¡Œ `./build.sh` æ‰ä¼šé‡æ–°æ„å»ºã€‚å¹³æ—¶åªéœ€æ‰§è¡Œ `./start.sh` å¯åŠ¨å³å¯ã€‚

---

### â“ Q: å¦‚ä½•æŒ‡å®šå¯åŠ¨å“ªä¸ª ROS èŠ‚ç‚¹ï¼Ÿ

ä½ å¯ä»¥ä¿®æ”¹ `docker-compose.yml` ä¸­çš„ `command:` å­—æ®µï¼Œä¾‹å¦‚ï¼š

```yaml
command: >
  bash -c "
  source /opt/ros/humble/setup.bash &&
  source install/setup.bash &&
  ros2 launch your_package your_launch.py"
```

---

## ğŸ§  æ‰©å±•å»ºè®®

- æ”¯æŒä» `projects.yaml` åŠ è½½æ›´å¤æ‚çš„é¡¹ç›®é…ç½®ï¼ˆå¦‚æŒ‡å®šåˆ†æ”¯/è·¯å¾„ï¼‰
- é›†æˆ GitLab CI / GitHub Actionsï¼Œå®ç°è‡ªåŠ¨æ„å»ºæ¨é€é•œåƒ
- ä½¿ç”¨å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–é•œåƒä½“ç§¯ä¸æ„å»ºé€Ÿåº¦
- æ¥å…¥æœ¬åœ°æˆ–è¿œç¨‹ç§æœ‰ Docker Registry

---

## ğŸ§© é™„åŠ è¯´æ˜ï¼šros_env2.sh ç¯å¢ƒåŠ è½½è„šæœ¬

é¡¹ç›®ä¸­åŒ…å«ä¸€ä¸ªç¯å¢ƒåˆå§‹åŒ–è„šæœ¬ `ros_env2.sh`ï¼Œç”¨äºåœ¨å®¹å™¨æˆ–äº¤äº’ç»ˆç«¯ä¸­è‡ªåŠ¨åŠ è½½ ROS 2 ç¯å¢ƒã€‚

### ğŸ”§ æ–‡ä»¶ç»“æ„ç¤ºä¾‹ï¼š

```bash
#!/bin/bash
set -e

# åŠ è½½ ROS 2 ä¸»ç¯å¢ƒ
source /opt/ros/humble/setup.bash

# å¦‚éœ€åŠ è½½å…¶ä»–å·¥ä½œç©ºé—´ï¼Œå¯æŒ‰éœ€å–æ¶ˆæ³¨é‡Š
# source "/home/parallels/catkin_ws/devel/setup.bash"
# source "/opt/cartographer_ros/setup.bash"

# æ‰§è¡Œä¼ å…¥å‘½ä»¤
exec "$@"
```
## ğŸ“® è”ç³»ä¸æ”¯æŒ

ç”± [infinitykernel.com](https://infinitykernel.com) æä¾›æ”¯æŒ  
å¦‚éœ€å®šåˆ¶ ROS æ„å»ºç³»ç»Ÿæˆ– CI/CD é›†æˆï¼Œè¯·è”ç³»ï¼š

ğŸ“§ **0x@infinitykernel.com**

